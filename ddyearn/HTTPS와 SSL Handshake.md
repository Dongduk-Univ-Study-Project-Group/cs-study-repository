## HTTPS와 SSL Handshake

### HTTPS
HTTPS는 HTTP에 보안 계층을 추가한 것이다. 
HTTPS는 제3자 인증, 공개키 암호화, 비밀키 암호화를 사용한다.  
제3자 인증은 믿을 수 있는 인증기관에 등록된 인증서만 신뢰하는 것이고,  
공개키 암호화는 비밀키를 공유하기 위해 사용한다.  
비밀키 암호화는 통신하는 데이터를 암호화하는데 사용한다.

### SSL Handshake
송신자와 수신자가 암호화된 데이터를 교환하기 위한 일련의 협상과정을 의미한다.  
클라이언트는 TCP 3way handshake를 수행한 이후 Client Hello를 전송한다.  
서버는 자신의 SSL 인증서를 보낸다. 인증서 내부에는 Server가 발행한 공개키(+개인키는 서버가 소유)가 들어있다. 
클라이언트는 받은 인증서를 신뢰하기 위해서 등록된 인증기관인지 확인한다.  
클라이언트는 서버가 보낸 개인키로 암호화된 이 SSL 인증서를 공개키를 사용하여 복호화한다. (브라우저에 내장되어있음)  
클라이언트는 사이트의 정보와, 서버의 공개키를 얻을 수 있다.  
서버의 공개키로 통신에 사용할 비밀키를 암호화해서 서버에 보낸다.  
여기서 전달된 '비밀키(대칭키)'가 바로 SSL Handshake의 목적이자 가장 중요한 수단인 데이터를 실제로 암호화할 대칭키 이다.  
서버는 이를 개인키로 확인하고 이후 통신은 공유된 비밀키로 암호화되어 통신한다.

### 공개키 암호화와 비밀키 암호화를 복합적으로 사용하는 이유
만약 공개키를 그대로 사용하면 많은 접속이 몰리는 서버는 매우 큰 비용을 지불해야 한다.  
반대로 대칭키는 암호를 푸는 열쇠를 상대에게 전송해야 하는데 이걸 그냥 전송하면 위험하다.  
그래서 속도는 느리지만 데이터를 안전하게 주고 받을 수 있는 공개키 방식으로 대칭키를 암호화하고  
실제 데이터를 주고 받을 때는 대칭키를 이용해서 데이터를 주고 받는다.
