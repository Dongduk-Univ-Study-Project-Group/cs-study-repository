> 트랜잭션이란 데이터베이스의 상태를 변화시키는 하나의 논리적인 작업 단위라고 할 수 있으며, 트랜잭션에는 여러개의 연산이 수행될 수 있습니다.
> 
> 
> 트랜잭션은 수행중에 한 작업이라도 실패하면 전부 실패하고, 모두 성공해야 성공이라고 할 수 있습니다.
> 

## 트랜잭션이란?

- 데이터베이스의 상태를 변화시키기 위해서 수행하는 작업의 단위
    - 즉, 간단히 말해 SELECT, INSERT, DELETE, UPDATE 등의 질의어를 통해 데이터베이스에 접근하는 것
    - 작업의 단위는 하나의 질의어일 수도 있고, 여러 질의어일 수도 있다.
- 데이터베이스의 상태를 변환시키는 하나의 논리적 기능을 수행하기 위한 작업의 단위 또는 한꺼번에 모두 수행되어야할 일련의 연산
- 사용자가 시스템에 대한 서비스 요구 시 시스템이 응답하기 위한 상태 변환 과정의 작업 단위
- 하나의 트랜잭션은 커밋되거나 롤백된다.

## 성질

### 원자성(Atomicity)

- 트랜잭션이 데이터베이스에 모두 반영되든지 혹은 전혀 반영되지 않아야 한다는 것
- 트랜잭션 내의 모든 명령은 반드시 완벽히 수행되어야하며, 모두가 완벽히 수행되지 않고 어느 하나라도 오류가 발생하면 트랜잭션 전부가 취소되어야 한다.
- 즉, **All or Nothing**
- 만약 트랜잭션 단위로 데이터가 처리되지 않는다면, 설계한 사람은 데이터 처리 시스템을 이해하기 힘들고, 오작동 했을 시 원인을 찾기 매우 힘들어진다.

### 일관성(Consistency)

- 트랜잭션의 작업 처리 결과가 항상 일관성 있어야 한다.
- 트랜잭션이 그 실행을 성공적으로 완료하면 언제나 일관성 있는 데이터베이스 상태로 변환한다.
- 시스템이 가지고있는 고정 요소는 트랜잭션 수행 전과 트랜잭션 수행 완료 후의 상태가 같아야한다.

### 독립성(Isolation)

- 둘 이상의 트랜잭션이 동시에 실행되고 있을 경우 어떤 하나의 트랜잭션이라도 다른 트랜잭션의 연산에 끼어들 수 없다.
- 하나의 특정 트랜잭션이 완료될 때까지, 다른 트랜잭션이 특정 트랜잭션의 결과를 참조할 수 없다.
- 각각의 트랜잭션은 독립적이라 서로 간섭이 불가능하다.

### 지속성(Durability)

- 트랜잭션이 성공적으로 완료됐을 경우 결과는 영구적으로 반영되어야한다.
- 보통 commit이 된다면 지속성은 만족할 수 있다.

## 트랜잭션의 Commit, Rollback 연산

### Commit

- 하나의 트랜잭션이 성공적으로 끝났고, 데이터베이스가 일관성 있는 상태에 있을 때 하나의 트랜잭션이 끝났다는 것을 알려주기 위해 사용하는 연산
- 이 트랜잭션이 행한 갱신 연산이 완료된 것을 트랜잭션 관리자에게 알려주는 연산

### Rollback

- 하나의 트랜잭션 처리가 비정상적으로 종료되어 트랜잭션의 원자성이 깨진 경우, 트랜잭션을 처음부터 다시 시작하거나 트랜잭션의 부분적으로만 연산된 결과를 다시 취소시킨다.
    - 즉, 하나의 트랜잭션 처리가 비정상적으로 종료되어 데이터베이스의 일관성을 깨뜨렸을 때, 이 **트랜잭션의 일부가 정상적으로 처리되었더라도 트랜잭션의 원자성을 구현하기위해 이 트랜잭션이 행한 모든 연산을 취소하는 연산**이다.
    - Rollback 시에는 해당 트랜잭션을 재시작하거나 폐기한다.

## 트랜잭션의 상태

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/756c7f78-e1f9-45f0-9b37-7be7193ed523/Untitled.png)

### Active

- 트랜잭션이 현재 실행중인 상태

### Failed

- 트랜잭션이 실행되다 오류가 발생해서 중단된 상태

### Aborted

- 트랜잭션이 비정상 종료되어 Rollback이 수행된 상태

### Partially Committed

- 트랜잭션의 연산이 마지막까지 실행되고 Commit이 되기 직전 상태

### Committed

- 트랜잭션이 성공적으로 종료되어 Commit 연산을 실행한 후의 상태

## 참고 자료

- [https://mommoo.tistory.com/62](https://mommoo.tistory.com/62)
- [https://wonit.tistory.com/462](https://wonit.tistory.com/462)
- [https://coding-factory.tistory.com/226](https://coding-factory.tistory.com/226)
- [https://devjem.tistory.com/27](https://devjem.tistory.com/27)